<?xml version="1.0" encoding="UTF-8"?>
<!-- member_mapper.xml : 회원(member)관리 관련 쿼리문이 들어간다. -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 1. parameterType에 1개의 Type만 올 수 있다.
2. parameterType에 bean인 경우 #{필드명}
3. parameterType에 Map<key, value>타입인 경우 #{key}로 쓴다.
4. resultType도 1개만 올 수 있는데 selectList인 경우 List로 변환한다. -->
<mapper namespace="project">
	<select id="showProcess" parameterType="Integer" resultType="Project"> 
		<choose>
    		<when test='value == "0"'>
    		SELECT * FROM project
    		</when>
    		<when test='value == "1"'>
      		SELECT * FROM project WHERE p_status = #{value}
    		</when>
    		<when test='value == "2"'>
      		SELECT * FROM project WHERE p_status = #{value}
    		</when>
    		<when test='value == "3"'>
      		SELECT * FROM project WHERE p_status = #{value}
    		</when>
    	</choose>
	</select>
	
	<select id="getRequired_SkillList" resultType="required_skill">
		select * from required_skills
	</select>
	
	<update id="progressUpdate" parameterType="Integer">
		UPDATE project SET p_status = #{progNum}
	</update>
	
	<select id="getProjectMaxNum" resultType="Integer">
		select NVL(MAX(p_num),0) FROM project
	</select>
	
	<insert id="insertProject" parameterType = "Map">
      INSERT INTO project VALUES(#{p_num},#{pc1_name},#{pc2_name},#{p_mid},#{p_budget},#{p_term},#{p_title},#{p_content}
      							,#{sysFileName},#{p_deadline},#{p_plnum},#{p_person},#{p_status})
   </insert>
	<select id="getProjectList" parameterType="Integer" resultType="project">
		<![CDATA[
		SELECT * FROM PLIST WHERE RNUM>=#{pageNum}*10-9 AND RNUM<=#{pageNum}*10 ORDER BY P_NUM
		]]>
		<!-- select * from project -->
	</select>
	
	<select id="getProjectCount" resultType="Integer">
		SELECT COUNT(*) FROM PLIST
	</select>
	
	<delete id="projectDelete" parameterType="Integer">
		DELETE FROM PROJECT WHERE p_num = #{pnum}
	</delete>
	
	<select id="getDevelopList" resultType="project">
		select * from project where p_pc1name = '개발'
	</select>
	
	<select id="getDesignList" resultType="project">
		select * from project where p_pc1name = '디자인'
	</select>
	<select id="getSearchResult" parameterType="String" resultType="project">
	SELECT * FROM PROJECT WHERE P_MID LIKE '%'||#{keyword}||'%' OR
	P_PC1NAME LIKE '%'||#{keyword}||'%' OR P_PC2NAME LIKE
	'%'||#{keyword}||'%' OR P_PLNUM0 LIKE '%'||#{keyword}||'%' OR P_PLNUM1
	LIKE '%'||#{keyword}||'%' OR P_PLNUM2 LIKE '%'||#{keyword}||'%'
</select>
   
</mapper>


